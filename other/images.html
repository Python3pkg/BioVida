<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Images &#8212; BioVida 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.6/simplex/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          BioVida</a>
        <span class="navbar-text navbar-version pull-left"><b>0.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://github.com/TariqAHassan/BioVida">View on GitHub</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html#dependencies">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html#image-data">Image Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../GettingStarted.html#cancer-imaging-archive">Cancer Imaging Archive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../GettingStarted.html#open-i-biomedical-image-search-engine">Open-i BioMedical Image Search Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../GettingStarted.html#automated-image-data-cleaning">Automated Image Data Cleaning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html#genomic-data">Genomic Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../GettingStarted.html#data-harvesting">Data Harvesting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../GettingStarted.html#exploring-available-databases">Exploring Available Databases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html#diagnostic-data">Diagnostic Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../GettingStarted.html#id1">Data Harvesting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../API.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-biovida.images.openi_interface">Images</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API.html#open-i-interface">Open-i Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#cancer-imaging-archive-interface">Cancer Imaging Archive Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#image-processing">Image Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#image-classification">Image Classification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#template-matching">Template Matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#border-and-edge-detection">Border and Edge Detection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-biovida.genomics.disgenet_interface">Genomics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API.html#disgenet-interface">DisGeNET Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-biovida.diagnostics.disease_ont_interface">Diagnostics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API.html#disease-ontology-interface">Disease Ontology Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#disease-symptoms-interface">Disease-Symptoms Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-biovida.unification.unify_domains">Domain Integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API.html#unifying-across-domains">Unifying Across Domains</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-biovida.images.image_cache_mgmt">Cache Manipulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API.html#image-cache-management">Image Cache Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API.html#module-biovida.support_tools.utilities">Support Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API.html#utilities">Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API.html#printing-tools">Printing Tools</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Current Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Images</a><ul>
<li><a class="reference internal" href="#open-i-interface">Open-i Interface</a></li>
<li><a class="reference internal" href="#cancer-imaging-archive-interface">Cancer Imaging Archive Interface</a></li>
<li><a class="reference internal" href="#image-processing">Image Processing</a></li>
<li><a class="reference internal" href="#image-classification">Image Classification</a></li>
<li><a class="reference internal" href="#template-matching">Template Matching</a></li>
<li><a class="reference internal" href="#border-and-edge-detection">Border and Edge Detection</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Images</a><ul>
<li><a class="reference internal" href="#open-i-interface">Open-i Interface</a></li>
<li><a class="reference internal" href="#cancer-imaging-archive-interface">Cancer Imaging Archive Interface</a></li>
<li><a class="reference internal" href="#image-processing">Image Processing</a></li>
<li><a class="reference internal" href="#image-classification">Image Classification</a></li>
<li><a class="reference internal" href="#template-matching">Template Matching</a></li>
<li><a class="reference internal" href="#border-and-edge-detection">Border and Edge Detection</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="module-biovida.images.openi_interface">
<span id="images"></span><h1>Images<a class="headerlink" href="#module-biovida.images.openi_interface" title="Permalink to this headline">¶</a></h1>
<div class="section" id="open-i-interface">
<h2>Open-i Interface<a class="headerlink" href="#open-i-interface" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="biovida.images.openi_interface.OpeniInterface">
<em class="property">class </em><code class="descclassname">biovida.images.openi_interface.</code><code class="descname">OpeniInterface</code><span class="sig-paren">(</span><em>cache_path=None</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/openi_interface.html#OpeniInterface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Python Interface for the NIH&#8217;s <a class="reference external" href="https://openi.nlm.nih.gov">Open-i</a> API.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cache_path</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; path to the location of the BioVida cache. If a cache does not exist in this location,
one will created. Default to <code class="docutils literal"><span class="pre">None</span></code>, which will generate a cache in the home folder.</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if <code class="docutils literal"><span class="pre">True</span></code> print additional details.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="biovida.images.openi_interface.OpeniInterface.cache_records_db_short">
<code class="descname">cache_records_db_short</code><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface.cache_records_db_short" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>cache_records_db</cite> with nonessential columns removed.</p>
</dd></dl>

<dl class="method">
<dt id="biovida.images.openi_interface.OpeniInterface.options">
<code class="descname">options</code><span class="sig-paren">(</span><em>search_parameter</em>, <em>print_options=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/openi_interface.html#OpeniInterface.options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface.options" title="Permalink to this definition">¶</a></dt>
<dd><p>Options for parameters of <code class="docutils literal"><span class="pre">search()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>search_parameter</strong> (<code class="docutils literal"><span class="pre">str</span></code>) &#8211; one of: &#8216;image_type&#8217;, &#8216;rankby&#8217;, &#8216;article_type&#8217;, &#8216;subset&#8217;, &#8216;collection&#8217;, &#8216;fields&#8217;,
&#8216;specialties&#8217;, &#8216;video&#8217; or &#8216;exclusions&#8217;.</li>
<li><strong>print_options</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if <code class="docutils literal"><span class="pre">True</span></code>, pretty print the options, else return as a <code class="docutils literal"><span class="pre">list</span></code>. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a list of valid values for a given search <code class="docutils literal"><span class="pre">search_parameter</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">list</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.openi_interface.OpeniInterface.pull">
<code class="descname">pull</code><span class="sig-paren">(</span><em>new_records_pull=True</em>, <em>image_size='large'</em>, <em>records_sleep_time=(10</em>, <em>1.5)</em>, <em>images_sleep_time=(10</em>, <em>1.5)</em>, <em>download_limit=100</em>, <em>check_cache_first=True</em>, <em>clinical_cases_only=True</em>, <em>use_image_caption=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/openi_interface.html#OpeniInterface.pull"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface.pull" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull (i.e., download) the current search.</p>
<p>In addition to the columns provided by Open-i, this method will automatically generate the
following columns by analyzing the pulled data:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'age'</span></code></li>
<li><code class="docutils literal"><span class="pre">'sex'</span></code></li>
<li><code class="docutils literal"><span class="pre">'ethnicity'</span></code></li>
<li><code class="docutils literal"><span class="pre">'diagnosis'</span></code></li>
<li><code class="docutils literal"><span class="pre">'parsed_abstract'</span></code></li>
<li>duration of illness (<code class="docutils literal"><span class="pre">'illness_duration_years'</span></code>)</li>
<li>the imaging modality (e.g., MRI) used, based on the text associated with the image (<code class="docutils literal"><span class="pre">'imaging_modality_from_text'</span></code>)</li>
<li>the plane (&#8216;axial&#8217;, &#8216;coronal&#8217; or &#8216;sagittal&#8217;) of the image (<code class="docutils literal"><span class="pre">'image_plane'</span></code>)</li>
<li>image problems (&#8216;arrows&#8217;, &#8216;asterisks&#8217; and &#8216;grids&#8217;) inferred from the image caption (<code class="docutils literal"><span class="pre">'image_problems_from_text'</span></code>)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The &#8216;parsed_abstract&#8217; column contains abstracts coerced into dictionaries where the subheadings of the abstract
form the keys and their associated information form the values. For example, a <em>MedPix</em> image will typically yield
a dictionary with the following keys: &#8216;history&#8217;, &#8216;finding&#8217;, &#8216;ddx&#8217; (differential diagnosis), &#8216;dxhow&#8217; and &#8216;exam&#8217;.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><em>MedPix</em> images include a distinct &#8216;diagnosis&#8217; section. For images from other sources, the <code class="docutils literal"><span class="pre">'diagnosis'</span></code>
column is obtained by analyzing the text associated with the image. This analysis could produce inaccuracies.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>new_records_pull</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; <p>if <code class="docutils literal"><span class="pre">True</span></code>, download the data for the current search. If <code class="docutils literal"><span class="pre">False</span></code>, use <code class="docutils literal"><span class="pre">INSTANCE.records_db</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Setting <code class="docutils literal"><span class="pre">new_records_pull=False</span></code> can be useful if one wishes to initially set <code class="docutils literal"><span class="pre">image_size=None</span></code>,
truncate or otherwise modify <code class="docutils literal"><span class="pre">INSTANCE.records_db</span></code> and then download images.</p>
</div>
</li>
<li><strong>image_size</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; <dl class="docutils">
<dt>one of: &#8216;large&#8217;, &#8216;grid150&#8217;, &#8216;thumb&#8217;, &#8216;thumb_large&#8217; or <code class="docutils literal"><span class="pre">None</span></code>. Defaults to &#8216;large&#8217;.</dt>
<dd>If <code class="docutils literal"><span class="pre">None</span></code>, no attempt will be made to download images.</dd>
</dl>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The analyses performed by the <code class="docutils literal"><span class="pre">image_processing.ImageProcessing</span></code> class are
most accurate with large images.</p>
</div>
</li>
<li><strong>records_sleep_time</strong> (<code class="docutils literal"><span class="pre">tuple</span></code>) &#8211; tuple of the form: <code class="docutils literal"><span class="pre">(every</span> <span class="pre">x</span> <span class="pre">downloads,</span> <span class="pre">period</span> <span class="pre">of</span> <span class="pre">time</span> <span class="pre">[seconds])</span></code>. Defaults to <code class="docutils literal"><span class="pre">(10,</span> <span class="pre">1.5)</span></code>.
Note: noise is randomly added to the sleep time by sampling from a normal distribution
(with mean = 0, sd = 0.75).</li>
<li><strong>images_sleep_time</strong> (<code class="docutils literal"><span class="pre">tuple</span></code>) &#8211; tuple of the form: <code class="docutils literal"><span class="pre">(every</span> <span class="pre">x</span> <span class="pre">downloads,</span> <span class="pre">period</span> <span class="pre">of</span> <span class="pre">time</span> <span class="pre">[seconds])</span></code>. Defaults to <code class="docutils literal"><span class="pre">(10,</span> <span class="pre">1.5)</span></code>.
Note: noise is randomly added to the sleep time by sampling from a normal distribution
(with mean = 0, sd = 0.75).</li>
<li><strong>download_limit</strong> (<code class="docutils literal"><span class="pre">int</span></code>) &#8211; max. number of results to download. If <code class="docutils literal"><span class="pre">None</span></code>, no limit will be imposed
(not recommended). Defaults to 100.</li>
<li><strong>check_cache_first</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; check the image cache for the image prior to downloading.
If <code class="docutils literal"><span class="pre">True</span></code> and the image is already present, no attempt will be made to download it
again.</li>
<li><strong>clinical_cases_only</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if <code class="docutils literal"><span class="pre">True</span></code> require that the data harvested is of a clinical case. Specifically,
this parameter requires that &#8216;article_type&#8217; is one of: &#8216;encounter&#8217;, &#8216;case_report&#8217;.
Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>use_image_caption</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if <code class="docutils literal"><span class="pre">True</span></code> block downloading of an image if its caption suggests the presence
of problematic image properties (e.g., &#8216;arrows&#8217;) likely to corrupt a dataset.
Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a DataFrame with the record information.
If <code class="docutils literal"><span class="pre">image_size</span></code> is not None, images will also be harvested and cached.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><strong>ValueError</strong> &#8211; if <code class="docutils literal"><span class="pre">search()</span></code> has not been called.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="biovida.images.openi_interface.OpeniInterface.records_db_short">
<code class="descname">records_db_short</code><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface.records_db_short" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>records_db</cite> with nonessential columns removed.</p>
</dd></dl>

<dl class="method">
<dt id="biovida.images.openi_interface.OpeniInterface.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>query=None, image_type=None, rankby=None, article_type=None, subset=None, collection=None, fields=None, specialties=None, video=None, exclusions=['graphics'], print_results=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/openi_interface.html#OpeniInterface.search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.openi_interface.OpeniInterface.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Tool to generate a search term (URL) for the NIH&#8217;s Open-i API.
The computed term is stored as a class attribute (<code class="docutils literal"><span class="pre">INSTANCE.current_search_url</span></code>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>query</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; a search term. <code class="docutils literal"><span class="pre">None</span></code> will be converted to an empty string.</li>
<li><strong>image_type</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; see <code class="docutils literal"><span class="pre">OpeniInterface().options('image_type')</span></code> for valid values.</li>
<li><strong>rankby</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; see <code class="docutils literal"><span class="pre">OpeniInterface().options('rankby')</span></code> for valid values.</li>
<li><strong>article_type</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; see <code class="docutils literal"><span class="pre">OpeniInterface().options('article_type')</span></code> for valid values. Defaults to &#8216;case_report&#8217;.</li>
<li><strong>subset</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; see <code class="docutils literal"><span class="pre">OpeniInterface().options('subset')</span></code> for valid values.</li>
<li><strong>collection</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; see <code class="docutils literal"><span class="pre">OpeniInterface().options('collection')</span></code> for valid values.</li>
<li><strong>fields</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; see <code class="docutils literal"><span class="pre">OpeniInterface().options('fields')</span></code> for valid values.</li>
<li><strong>specialties</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; see <code class="docutils literal"><span class="pre">OpeniInterface().options('specialties')</span></code> for valid values.</li>
<li><strong>video</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; see <code class="docutils literal"><span class="pre">OpeniInterface().options('video')</span></code> for valid values.</li>
<li><strong>exclusions</strong> (<code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; <p>one or both of: &#8216;graphics&#8217;, &#8216;multipanel&#8217;. Defaults to <code class="docutils literal"><span class="pre">['graphics']</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Excluding &#8216;multipanel&#8217; can result in images that <em>are</em> multipanel
being returned from Open-i API. For this reason, including &#8216;multipanel&#8217;
is not currently recommended.</p>
</div>
</li>
<li><strong>print_results</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if <code class="docutils literal"><span class="pre">True</span></code>, print the number of search results.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If passing a single option to <code class="docutils literal"><span class="pre">image_type</span></code>, <code class="docutils literal"><span class="pre">rankby</span></code>, <code class="docutils literal"><span class="pre">article_type</span></code>, <code class="docutils literal"><span class="pre">subset</span></code>,
<code class="docutils literal"><span class="pre">collection</span></code>, <code class="docutils literal"><span class="pre">fields</span></code>, <code class="docutils literal"><span class="pre">specialties</span></code> or <code class="docutils literal"><span class="pre">video</span></code>, a string can be used, e.g.,
<code class="docutils literal"><span class="pre">...image_type='ct')</span></code>. For multiple values, a list or tuple must be used, e.g.,
<code class="docutils literal"><span class="pre">...image_type=('ct',</span> <span class="pre">'mri')</span></code>.</p>
</div>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-biovida.images.cancer_image_interface"></span><div class="section" id="cancer-imaging-archive-interface">
<h2>Cancer Imaging Archive Interface<a class="headerlink" href="#cancer-imaging-archive-interface" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface">
<em class="property">class </em><code class="descclassname">biovida.images.cancer_image_interface.</code><code class="descname">CancerImageInterface</code><span class="sig-paren">(</span><em>api_key</em>, <em>cache_path=None</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/cancer_image_interface.html#CancerImageInterface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Python Interface for the <a class="reference external" href="http://www.cancerimagingarchive.net/">Cancer Imaging Archive</a>&#8216;s API.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>api_key</strong> (<code class="docutils literal"><span class="pre">str</span></code>) &#8211; <p>a key to the the Cancer Imaging Archive&#8217;s API.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An API key can be obtained by following the instructions provided <a class="reference external" href="https://wiki.cancerimagingarchive.net/display/Public/TCIA+Programmatic+Interface+%28REST+API%29+Usage+Guide/">here</a>.</p>
</div>
</li>
<li><strong>cache_path</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; path to the location of the BioVida cache. If a cache does not exist in this location,
one will created. Default to <code class="docutils literal"><span class="pre">None</span></code>, which will generate a cache in the home folder.</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if <code class="docutils literal"><span class="pre">True</span></code> print additional details</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface.cache_records_db_short">
<code class="descname">cache_records_db_short</code><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface.cache_records_db_short" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>cache_records_db</cite> with nonessential columns removed.</p>
</dd></dl>

<dl class="method">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface.extract_dicom_data">
<code class="descname">extract_dicom_data</code><span class="sig-paren">(</span><em>database='records_db'</em>, <em>make_hashable=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/cancer_image_interface.html#CancerImageInterface.extract_dicom_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface.extract_dicom_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract data from all dicom files referenced in <code class="docutils literal"><span class="pre">records_db</span></code> or <code class="docutils literal"><span class="pre">cache_records_db</span></code>.
Note: this requires that <code class="docutils literal"><span class="pre">save_dicoms</span></code> is <code class="docutils literal"><span class="pre">True</span></code> when <code class="docutils literal"><span class="pre">pull()</span></code> is called.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>database</strong> (<code class="docutils literal"><span class="pre">str</span></code>) &#8211; the name of the database to use. Must be one of: &#8216;records_db&#8217;, &#8216;cache_records_db&#8217;.
Defaults to &#8216;records_db&#8217;.</li>
<li><strong>make_hashable</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; If <code class="docutils literal"><span class="pre">True</span></code> convert the data extracted to nested tuples.
If <code class="docutils literal"><span class="pre">False</span></code> generate nested dictionaries. Defaults to <code class="docutils literal"><span class="pre">False</span></code></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a series of the dicom data with dictionaries of the form <code class="docutils literal"><span class="pre">{path:</span> <span class="pre">{DICOM</span> <span class="pre">Description:</span> <span class="pre">value,</span> <span class="pre">...},</span> <span class="pre">...}</span></code>.
If <code class="docutils literal"><span class="pre">make_hashable</span></code> is <code class="docutils literal"><span class="pre">True</span></code>, all dictionaries will be converted to <code class="docutils literal"><span class="pre">tuples</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">Series</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface.pull">
<code class="descname">pull</code><span class="sig-paren">(</span><em>patient_limit=3</em>, <em>session_limit=1</em>, <em>collections_limit=None</em>, <em>allowed_modalities=None</em>, <em>image_format='png'</em>, <em>save_dicoms=False</em>, <em>check_cache_first=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/cancer_image_interface.html#CancerImageInterface.pull"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface.pull" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull (i.e., download) the current search.</p>
<p>Notes:</p>
<ul>
<li><p class="first">3D images are saved as individual frames.</p>
</li>
<li><p class="first">Images file names in the cache adhere to the following format:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">[instance,</span> <span class="pre">pull_position]__[patient_id_[Last</span> <span class="pre">10</span> <span class="pre">Digits</span> <span class="pre">of</span> <span class="pre">SeriesInstanceUID]]__[Image</span> <span class="pre">Scale</span> <span class="pre">('default')].image_format</span></code></p>
</div></blockquote>
</li>
</ul>
<p>where:</p>
<table class="hlist"><tr><td><ul class="simple">
<li>&#8216;instance&#8217; denotes the image&#8217;s position in the 3D image (if applicable and available)</li>
<li>&#8216;pull_position&#8217; denotes the position of the image in the set returned for the given &#8216;SeriesInstanceUID&#8217; by the Cancer Imaging Archive.</li>
</ul>
</td></tr></table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>patient_limit</strong> (<code class="docutils literal"><span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; limit on the number of patients to extract.
Patient IDs are sorted prior to this limit being imposed.
If <code class="docutils literal"><span class="pre">None</span></code>, no patient_limit will be imposed. Defaults to <cite>3</cite>.</li>
<li><strong>session_limit</strong> (<code class="docutils literal"><span class="pre">int</span></code>) &#8211; <dl class="docutils">
<dt>restrict image harvesting to the first <code class="docutils literal"><span class="pre">n</span></code> imaging sessions (days) for a given patient,</dt>
<dd>where <code class="docutils literal"><span class="pre">n</span></code> is the value passed to this parameter. If <code class="docutils literal"><span class="pre">None</span></code>, no limit will be imposed.
Defaults to <cite>1</cite>.</dd>
</dl>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Several studies (collections) in the Cancer Imaging Archive database have multiple imaging sessions.
Latter sessions may be of patients following interventions, such as surgery, intended to
<em>eliminate</em> cancerous tissue. For this reason it cannot be assumed that images obtained from
non-baseline sessions (i.e., session number &gt; 1) contain signs of disease.</p>
</div>
</li>
<li><strong>collections_limit</strong> (<code class="docutils literal"><span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; limit the number of collections to download. If <code class="docutils literal"><span class="pre">None</span></code>, no limit will be applied.
Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>allowed_modalities</strong> (<code class="docutils literal"><span class="pre">list</span></code> or <code class="docutils literal"><span class="pre">tuple</span></code>) &#8211; limit images downloaded to certain modalities.
See: <code class="docutils literal"><span class="pre">CancerImageInterface(YOUR_API_KEY_HERE).dicom_modality_abbrevs</span></code> (use the keys).
Note: &#8216;MRI&#8217;, &#8216;PET&#8217;, &#8216;CT&#8217; and &#8216;X-Ray&#8217; can also be used.
This parameter is not case sensitive. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>image_format</strong> (<code class="docutils literal"><span class="pre">str</span></code>) &#8211; format for the image, e.g., &#8216;png&#8217;, &#8216;jpg&#8217;, etc. If <code class="docutils literal"><span class="pre">None</span></code>, images will not be downloaded.
Defaults to &#8216;png&#8217;.</li>
<li><strong>save_dicoms</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if <code class="docutils literal"><span class="pre">True</span></code>, save the raw dicom files. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>check_cache_first</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; <dl class="docutils">
<dt>check the image cache for the image prior to downloading.</dt>
<dd>If <code class="docutils literal"><span class="pre">True</span></code> and the image is already present, no attempt will be made to download it
again. If <code class="docutils literal"><span class="pre">False</span></code> the image will be downloaded regardless of whether or not it is
detected in the cache.</dd>
</dl>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If a single frame of a 3D image is missing from the cache the entire image will be
downloaded again.</p>
</div>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a DataFrame with the record information.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface.records_db_short">
<code class="descname">records_db_short</code><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface.records_db_short" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>records_db</cite> with nonessential columns removed.</p>
</dd></dl>

<dl class="method">
<dt id="biovida.images.cancer_image_interface.CancerImageInterface.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>collection=None</em>, <em>cancer_type=None</em>, <em>location=None</em>, <em>modality=None</em>, <em>download_override=False</em>, <em>pretty_print=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/cancer_image_interface.html#CancerImageInterface.search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.cancer_image_interface.CancerImageInterface.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to Search for studies on the Cancer Imaging Archive.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>collection</strong> (<code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">tuple</span></code>, <code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; a collection (study), or iterable (e.g., list) of collections,
hosted by the Cancer Imaging Archive. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>cancer_type</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">iterable</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; a string or list/tuple of specifying cancer types. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>location</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">iterable</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; a string or list/tuple of specifying body locations. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>modality</strong> (<code class="docutils literal"><span class="pre">str</span></code>, <code class="docutils literal"><span class="pre">iterable</span></code> or <code class="docutils literal"><span class="pre">None</span></code>) &#8211; the type of imaging technology. See: <code class="docutils literal"><span class="pre">CancerImageInterface().dicom_modality_abbrevs</span></code> for
valid values. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>download_override</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; If <code class="docutils literal"><span class="pre">True</span></code>, override any existing database currently cached and download a new one.
Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>pretty_print</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if <code class="docutils literal"><span class="pre">True</span></code>, pretty print the search results. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a dataframe containing the search results.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CancerImageInterface</span><span class="p">(</span><span class="n">YOUR_API_KEY_HERE</span><span class="p">)</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">cancer_type</span><span class="o">=</span><span class="s1">&#39;carcinoma&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;head&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">   collection                   cancer_type                          modalities         subjects    location</span>
<span class="go">0  TCGA-HNSC            Head and Neck Squamous Cell Carcinoma  CT, MR, PT                 164     [Head, Neck]</span>
<span class="go">1  QIN-HeadNeck         Head and Neck Carcinomas               PT, CT, SR, SEG, RWV       156     [Head, Neck]</span>
<span class="go">      ...                          ...                                  ...               ...         ...</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-biovida.images.image_processing"></span><div class="section" id="image-processing">
<h2>Image Processing<a class="headerlink" href="#image-processing" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="biovida.images.image_processing.ImageProcessing">
<em class="property">class </em><code class="descclassname">biovida.images.image_processing.</code><code class="descname">ImageProcessing</code><span class="sig-paren">(</span><em>instance</em>, <em>db_to_extract='records_db'</em>, <em>model_location=None</em>, <em>verbose=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#ImageProcessing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.ImageProcessing" title="Permalink to this definition">¶</a></dt>
<dd><p>This class is designed to allow easy analysis of cached image data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>instance</strong> (<code class="docutils literal"><span class="pre">OpenInterface</span> <span class="pre">Class</span></code>) &#8211; an instance of the <code class="docutils literal"><span class="pre">biovida.images.openi_interface.OpenInterface()</span></code> class.</li>
<li><strong>db_to_extract</strong> (<code class="docutils literal"><span class="pre">str</span></code>) &#8211; <code class="docutils literal"><span class="pre">records_db</span></code> or``cache_records_db``. Defaults to &#8216;records_db&#8217;.</li>
<li><strong>model_location</strong> (<code class="docutils literal"><span class="pre">str</span></code>) &#8211; the location of the model for Convnet.
If <cite>None</cite>, the default model will be used. Defaults to <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if <code class="docutils literal"><span class="pre">True</span></code>, print additional details. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Variables:</th><td class="field-body"><p class="first last"><strong>image_dataframe</strong> &#8211; this is the dataframe that was passed when instantiating the class and
contains a cache of all analyses run as new columns.</p>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="biovida.images.image_processing.ImageProcessing.auto">
<code class="descname">auto</code><span class="sig-paren">(</span><em>image_problem_threshold=0.275</em>, <em>valid_floor=0.01</em>, <em>require_grayscale=True</em>, <em>new_analysis=False</em>, <em>status=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#ImageProcessing.auto"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.ImageProcessing.auto" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically carry out all aspects of image preprocessing (recommended).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image_problem_threshold</strong> (<code class="docutils literal"><span class="pre">float</span></code>) &#8211; see <code class="docutils literal"><span class="pre">auto_decision()</span></code>. Defaults to <cite>0.275</cite>.</li>
<li><strong>valid_floor</strong> (<code class="docutils literal"><span class="pre">float</span></code>) &#8211; the smallest value needed for a &#8216;valid_img&#8217; to be considered valid. Defaults to <cite>0.01</cite>.</li>
<li><strong>require_grayscale</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; see <code class="docutils literal"><span class="pre">auto_decision()</span></code>. Defaults to <code class="docutils literal"><span class="pre">True</span></code></li>
<li><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; rerun the analysis if it has already been computed. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the <cite>image_dataframe</cite>, complete with the results of all possible analyses
(using default parameter values).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">Pandas</span> <span class="pre">DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.ImageProcessing.auto_analysis">
<code class="descname">auto_analysis</code><span class="sig-paren">(</span><em>new_analysis=False</em>, <em>status=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#ImageProcessing.auto_analysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.ImageProcessing.auto_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically use the class methods to analyze the <code class="docutils literal"><span class="pre">image_dataframe</span></code> using default
parameter values for class methods.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; rerun the analysis if it has already been computed. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.ImageProcessing.auto_decision">
<code class="descname">auto_decision</code><span class="sig-paren">(</span><em>image_problem_threshold</em>, <em>require_grayscale</em>, <em>valid_floor=0.01</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#ImageProcessing.auto_decision"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.ImageProcessing.auto_decision" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically generate &#8216;valid_image&#8217; column in the <cite>image_dataframe</cite>
column by deciding whether or not images are valid using default parameter values for class methods.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>image_problem_threshold</strong> (<code class="docutils literal"><span class="pre">float</span></code>) &#8211; a scalar from 0 to 1 which specifies the threshold value required
to cause the image to be marked as invalid.
For instance, a threshold value of <cite>0.5</cite> would mean that any image
which contains a image problem probability above <cite>0.5</cite> will be marked
as invalid.</li>
<li><strong>require_grayscale</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if True, require that images are grayscale to be considered valid.</li>
<li><strong>valid_floor</strong> (<code class="docutils literal"><span class="pre">float</span></code>) &#8211; the smallest value needed for a &#8216;valid_img&#8217; to be considered valid. Defaults to <cite>0.01</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.ImageProcessing.border_analysis">
<code class="descname">border_analysis</code><span class="sig-paren">(</span><em>signal_strength_threshold=0.25</em>, <em>min_border_separation=0.15</em>, <em>lower_bar_search_space=0.9</em>, <em>new_analysis=False</em>, <em>status=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#ImageProcessing.border_analysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.ImageProcessing.border_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for <code class="docutils literal"><span class="pre">biovida.images.models.border_detection.border_detection()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>signal_strength_threshold</strong> (<code class="docutils literal"><span class="pre">float</span></code>) &#8211; see <code class="docutils literal"><span class="pre">biovida.images.models.border_detection()</span></code>.</li>
<li><strong>min_border_separation</strong> (<code class="docutils literal"><span class="pre">float</span></code>) &#8211; see <code class="docutils literal"><span class="pre">biovida.images.models.border_detection()</span></code>.</li>
<li><strong>lower_bar_search_space</strong> (<code class="docutils literal"><span class="pre">float</span></code>) &#8211; see <code class="docutils literal"><span class="pre">biovida.images.models.border_detection()</span></code>.</li>
<li><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; rerun the analysis if it has already been computed. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.ImageProcessing.crop_decision">
<code class="descname">crop_decision</code><span class="sig-paren">(</span><em>new_analysis=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#ImageProcessing.crop_decision"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.ImageProcessing.crop_decision" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; rerun the analysis if it has already been computed. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.ImageProcessing.grayscale_analysis">
<code class="descname">grayscale_analysis</code><span class="sig-paren">(</span><em>new_analysis=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#ImageProcessing.grayscale_analysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.ImageProcessing.grayscale_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze the images to determine whether or not they are grayscale
(uses the PIL image library).</p>
<dl class="docutils">
<dt>Note:</dt>
<dd><ul class="first last simple">
<li>this tool is very conservative (very small amounts of &#8216;color&#8217; will yield <cite>False</cite>).</li>
<li>the exception to the above rule is the <em>very rare</em> case of an image which even split
of red, green and blue.</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; rerun the analysis if it has already been computed. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="biovida.images.image_processing.ImageProcessing.image_dataframe_short">
<code class="descname">image_dataframe_short</code><a class="headerlink" href="#biovida.images.image_processing.ImageProcessing.image_dataframe_short" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <cite>image_dataframe</cite> with nonessential columns removed.</p>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.ImageProcessing.logo_analysis">
<code class="descname">logo_analysis</code><span class="sig-paren">(</span><em>match_quality_threshold=0.25</em>, <em>xy_position_threshold=(0.3333333333333333</em>, <em>0.4)</em>, <em>base_resizes=(0.5</em>, <em>2.5</em>, <em>0.1)</em>, <em>end_search_threshold=0.875</em>, <em>base_image_cropping=(0.15</em>, <em>0.5)</em>, <em>new_analysis=False</em>, <em>status=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#ImageProcessing.logo_analysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.ImageProcessing.logo_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for the MedPix Logo. If located, with match quality above match_quality_threshold,
populate the the &#8216;medpix_logo_bounding_box&#8217; of <code class="docutils literal"><span class="pre">image_dataframe</span></code> with its bounding box.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>match_quality_threshold</strong> (<code class="docutils literal"><span class="pre">float</span></code>) &#8211; the minimum match quality required to accept the match.
See: <code class="docutils literal"><span class="pre">skimage.feature.match_template()</span></code> for more information.</li>
<li><strong>xy_position_threshold</strong> (<code class="docutils literal"><span class="pre">tuple</span></code>) &#8211; tuple of the form: (x_greater_check, y_greater_check).
For instance the default (<code class="docutils literal"><span class="pre">(1/3.0,</span> <span class="pre">1/2.5)</span></code>) requires that the
x position of the logo is greater than 1/3 of the image&#8217;s width
and less than 1/2.5 of the image&#8217;s height.</li>
<li><strong>base_resizes</strong> (<code class="docutils literal"><span class="pre">tuple</span></code>) &#8211; See: <code class="docutils literal"><span class="pre">biovida.images.models.template_matching.robust_match_template()</span></code>.</li>
<li><strong>end_search_threshold</strong> (<code class="docutils literal"><span class="pre">float</span></code>) &#8211; See: <code class="docutils literal"><span class="pre">biovida.images.models.template_matching.robust_match_template()</span></code>.</li>
<li><strong>base_image_cropping</strong> (<code class="docutils literal"><span class="pre">tuple</span></code>) &#8211; See: <code class="docutils literal"><span class="pre">biovida.images.models.template_matching.robust_match_template()</span></code></li>
<li><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; rerun the analysis if it has already been computed.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.ImageProcessing.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>save_rule</em>, <em>create_dirs=False</em>, <em>allow_overwrite=True</em>, <em>crop_images=True</em>, <em>convert_to_rgb=False</em>, <em>status=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#ImageProcessing.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.ImageProcessing.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save processed images to disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>save_rule</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">function</span></code>) &#8211; <ul>
<li>if a <code class="docutils literal"><span class="pre">str</span></code>: the directory to save the images.</li>
<li>if a <code class="docutils literal"><span class="pre">function</span></code>: it must (1) accept a single parameter (argument) and (2) return system path(s)
[see example below].</li>
</ul>
</li>
<li><strong>create_dirs</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if <code class="docutils literal"><span class="pre">True</span></code>, create directories returned by <code class="docutils literal"><span class="pre">divvy_rule</span></code> if they do not exist.
Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>allow_overwrite</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if <code class="docutils literal"><span class="pre">True</span></code> allow existing images to be overwritten. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>crop_images</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; Crop the images using analyses results from <cite>border_analysis()</cite> and
<code class="docutils literal"><span class="pre">logo_analysis()</span></code>. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>convert_to_rgb</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if <code class="docutils literal"><span class="pre">True</span></code>, use the PIL library to convert the images to RGB. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biovida.images</span> <span class="k">import</span> <span class="n">OpeniInterface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biovida.images</span> <span class="k">import</span> <span class="n">ImageProcessing</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opi</span> <span class="o">=</span> <span class="n">OpeniInterface</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opi</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">image_type</span><span class="o">=</span><span class="s1">&#39;mri&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opi</span><span class="o">.</span><span class="n">pull</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span> <span class="o">=</span> <span class="n">ImageProcessing</span><span class="p">(</span><span class="n">opi</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
<span class="gp">...</span>
<span class="go"># Simple Save Rule</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;/your/path/here/images&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go"># More Complex Save Rule</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_save_rule</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;lung&#39;</span> <span class="ow">in</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="s1">&#39;/your/path/here/lung_images&#39;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;heart&#39;</span> <span class="ow">in</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;abstract&#39;</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="s1">&#39;/your/path/here/heart_images&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">my_save_rule</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="biovida.images.image_processing.ImageProcessing.visual_image_problems">
<code class="descname">visual_image_problems</code><span class="sig-paren">(</span><em>new_analysis=False</em>, <em>status=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/image_processing.html#ImageProcessing.visual_image_problems"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.image_processing.ImageProcessing.visual_image_problems" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is powered by a Convolutional Neural Network which
computes probabilities for the presence of problematic image properties or types.</p>
<p>Currently, the model can identify the follow problems:</p>
<ul class="simple">
<li>arrows in images</li>
<li>images arrayed as grids</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>new_analysis</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; rerun the analysis if it has already been computed. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; display status bar. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Examples:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">DataFrame</span><span class="p">[</span><span class="s1">&#39;visual_image_problems&#39;</span><span class="p">]</span>
<span class="gp">...</span>
<span class="go">0 [(&#39;valid_img&#39;, 0.97158539), (&#39;arrows&#39;, 0.066939682), (&#39;grids&#39;, 0.0010551035)]</span>
<span class="go">1 [(&#39;valid_img&#39;, 0.98873705), (&#39;arrows&#39;, 0.024444019), (&#39;grids&#39;, 0.0001462775)]</span>
<span class="go">2 [(&#39;valid_img&#39;, 0.89019465), (&#39;arrows&#39;, 0.16754828), (&#39;grids&#39;, 0.009004808)]</span>
<span class="go">3 [(&#39;grids&#39;, 0.85855108), (&#39;valid_img&#39;, 0.0002961561), (&#39;arrows&#39;, 6.8026602e-09)]</span>
</pre></div>
</div>
<p>The first value in the tuple represents the problem identified and second
value represents its associated probability. For example, in the final row
we can see that the model strongly &#8216;believes&#8217; both that the image is, in fact,
an image composed of several smaller images (forming an image &#8216;grid&#8217;). Conversely,
it believes all of the other images are likely devoid of problems it has been
trained to detect.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-biovida.images.models.image_classification"></span><div class="section" id="image-classification">
<h2>Image Classification<a class="headerlink" href="#image-classification" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="biovida.images.models.image_classification.ImageClassificationCNN">
<em class="property">class </em><code class="descclassname">biovida.images.models.image_classification.</code><code class="descname">ImageClassificationCNN</code><span class="sig-paren">(</span><em>data_path=None</em>, <em>image_shape=(150</em>, <em>150)</em>, <em>rescale=0.00392156862745098</em>, <em>shear_range=0.05</em>, <em>zoom_range=0.3</em>, <em>horizontal_flip=True</em>, <em>vertical_flip=False</em>, <em>batch_size=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/models/image_classification.html#ImageClassificationCNN"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.models.image_classification.ImageClassificationCNN" title="Permalink to this definition">¶</a></dt>
<dd><p>Keras Convolutional Neural Networks Interface.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data_path</strong> (<code class="docutils literal"><span class="pre">str</span></code>) &#8211; path to the directory with the subdirectories entitled &#8216;train&#8217; and &#8216;validation&#8217;.
This directory <em>must</em> have this structure. Defaults to <code class="docutils literal"><span class="pre">None</span></code> (to be use when loading
pre-computed weights).</li>
<li><strong>image_shape</strong> (<code class="docutils literal"><span class="pre">tuple</span></code> or <code class="docutils literal"><span class="pre">list</span></code>.) &#8211; the (height, width) to rescale the images to. Elements must be <code class="docutils literal"><span class="pre">ints</span></code>. Defaults to <code class="docutils literal"><span class="pre">(150,</span> <span class="pre">150)</span></code>.</li>
<li><strong>rescale</strong> (<code class="docutils literal"><span class="pre">float</span></code>) &#8211; See: <code class="docutils literal"><span class="pre">keras.preprocessing.image.ImageDataGenerator()</span></code>. Defaults to 1/255.</li>
<li><strong>shear_range</strong> (<code class="docutils literal"><span class="pre">float</span></code>) &#8211; See: <code class="docutils literal"><span class="pre">keras.preprocessing.image.ImageDataGenerator()</span></code>. Defaults to 0.1.</li>
<li><strong>zoom_range</strong> (<code class="docutils literal"><span class="pre">float</span></code>) &#8211; See: <code class="docutils literal"><span class="pre">keras.preprocessing.image.ImageDataGenerator()</span></code>. Defaults to 0.35.</li>
<li><strong>horizontal_flip</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; See: <code class="docutils literal"><span class="pre">keras.preprocessing.image.ImageDataGenerator()</span></code>. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>vertical_flip</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; See: <code class="docutils literal"><span class="pre">keras.preprocessing.image.ImageDataGenerator()</span></code>. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>batch_size</strong> (<code class="docutils literal"><span class="pre">int</span></code>) &#8211; Samples to propagate through the model.
See: <code class="docutils literal"><span class="pre">keras.preprocessing.ImageDataGenerator().flow_from_directory()</span></code>.
Defaults to 4.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="biovida.images.models.image_classification.ImageClassificationCNN.convnet">
<code class="descname">convnet</code><span class="sig-paren">(</span><em>model_to_use='default'</em>, <em>loss='binary_crossentropy'</em>, <em>optimizer='default'</em>, <em>metrics=('accuracy'</em>, <em>)</em>, <em>output_layer_activation='sigmoid'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/models/image_classification.html#ImageClassificationCNN.convnet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.models.image_classification.ImageClassificationCNN.convnet" title="Permalink to this definition">¶</a></dt>
<dd><p>Define and Compile the Image Recognition Convolutional Neural Network.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>model_to_use</strong> (<code class="docutils literal"><span class="pre">str</span></code>) &#8211; <p>one of: &#8216;default&#8217;, &#8216;vgg19&#8217;, &#8216;alex_net&#8217;. Defaults to &#8216;default&#8217;.</p>
<ul>
<li>&#8216;default&#8217;: a relatively simple sequential model with two convolution layers (each followed by 2x2 max pooling); one hidden layer and 0.5 drop out.</li>
<li>&#8216;alex_net&#8217;: the 2012 &#8216;AlexNet&#8217; model.</li>
<li>&#8216;vgg19&#8217;: the VGG 19 model.</li>
</ul>
</li>
<li><strong>loss</strong> (<code class="docutils literal"><span class="pre">str</span></code>) &#8211; Loss function. Defaults to &#8216;categorical_crossentropy&#8217;.
See: <code class="docutils literal"><span class="pre">keras.models.Sequential()</span></code>.</li>
<li><strong>optimizer</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">keras.optimizers</span></code>) &#8211; Optimizer name. Defaults to &#8216;default&#8217;, which will use RMSprop with learning rate = <code class="docutils literal"><span class="pre">0.0001</span></code>.
See: <code class="docutils literal"><span class="pre">keras.models.Sequential()</span></code>.</li>
<li><strong>metrics</strong> (<code class="docutils literal"><span class="pre">tuple</span></code>) &#8211; Metrics to evaluate. Defaults to (&#8216;accuracy&#8217;,).
Note: if round braces are used, it MUST contain a comma (to make it a tuple).
See: <code class="docutils literal"><span class="pre">keras.models.Sequential()</span></code>.</li>
<li><strong>output_layer_activation</strong> (<code class="docutils literal"><span class="pre">str</span></code>) &#8211; the activation function to use on the output layer. See: <a class="reference external" href="https://keras.io/activations/#available-activations">https://keras.io/activations/#available-activations</a>. Defaults to &#8216;sigmoid&#8217;.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.models.image_classification.ImageClassificationCNN.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>nb_epoch=10</em>, <em>min_delta=0.1</em>, <em>patience=3</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/models/image_classification.html#ImageClassificationCNN.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.models.image_classification.ImageClassificationCNN.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the model to the training data and run a validation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>nb_epoch</strong> (<code class="docutils literal"><span class="pre">int</span></code>) &#8211; number of epochs. See: <code class="docutils literal"><span class="pre">keras.models.Sequential()</span></code>. Defaults to 10.</li>
<li><strong>min_delta</strong> (<code class="docutils literal"><span class="pre">float</span></code>) &#8211; see <code class="docutils literal"><span class="pre">keras.callbacks.EarlyStopping()</span></code>.</li>
<li><strong>patience</strong> (<code class="docutils literal"><span class="pre">int</span></code>) &#8211; see <code class="docutils literal"><span class="pre">keras.callbacks.EarlyStopping()</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">AttributeError</span></code> if <code class="docutils literal"><span class="pre">ImageClassificationCNN().convnet()</span></code> is yet to be called.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.models.image_classification.ImageClassificationCNN.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>path</em>, <em>override_existing=False</em>, <em>default_model_load=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/models/image_classification.html#ImageClassificationCNN.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.models.image_classification.ImageClassificationCNN.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a model from disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<code class="docutils literal"><span class="pre">str</span></code>) &#8211; path to save the data to.See: <code class="docutils literal"><span class="pre">keras.models.Sequential()</span></code>.</li>
<li><strong>override_existing</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; If True and a model has already been instantiated, override this replace this model.
Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>default_model_load</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; load the default model if <code class="docutils literal"><span class="pre">ImageClassificationCNN().convnet()</span></code> has not been called.
Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">AttributeError</span></code> if a model is currently instantiated.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.models.image_classification.ImageClassificationCNN.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>list_of_images</em>, <em>status=True</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/models/image_classification.html#ImageClassificationCNN.predict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.models.image_classification.ImageClassificationCNN.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Predictions for a list of images.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>list_of_images</strong> (<code class="docutils literal"><span class="pre">list</span></code>) &#8211; a list of paths (strings) to images or <code class="docutils literal"><span class="pre">ndarrays</span></code>.</li>
<li><strong>status</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; True for a tqdm status bar; False for no status bar. Defaults to True.</li>
<li><strong>verbose</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; if True, print updates. Defaults to False</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a list of lists with tuples of the form (name, probability). Defaults to False.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">list</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="biovida.images.models.image_classification.ImageClassificationCNN.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>save_name</em>, <em>path=None</em>, <em>overwrite=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/models/image_classification.html#ImageClassificationCNN.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.models.image_classification.ImageClassificationCNN.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the weights from a trained model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>save_name</strong> (<code class="docutils literal"><span class="pre">str</span></code>) &#8211; name of the file. Do not include the &#8216;.h5&#8217; extension as it
will be added automatically.</li>
<li><strong>path</strong> (<code class="docutils literal"><span class="pre">str</span></code>) &#8211; path to save the data to. See: <code class="docutils literal"><span class="pre">keras.models.Sequential()</span></code>.</li>
<li><strong>overwrite</strong> (<code class="docutils literal"><span class="pre">bool</span></code>) &#8211; overwrite the existing copy of the data</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">AttributeError</span></code> if <code class="docutils literal"><span class="pre">ImageClassificationCNN().fit()</span></code> is yet to be called.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-biovida.images.models.template_matching"></span><div class="section" id="template-matching">
<h2>Template Matching<a class="headerlink" href="#template-matching" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="biovida.images.models.template_matching.robust_match_template">
<code class="descclassname">biovida.images.models.template_matching.</code><code class="descname">robust_match_template</code><span class="sig-paren">(</span><em>pattern_image</em>, <em>base_image</em>, <em>base_resizes=(0.5</em>, <em>2.5</em>, <em>0.1)</em>, <em>end_search_threshold=0.875</em>, <em>base_image_cropping=(0.15</em>, <em>0.5)</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/biovida/images/models/template_matching.html#robust_match_template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#biovida.images.models.template_matching.robust_match_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for a pattern image in a base image using a algorithm which is robust
against variation in the size of the pattern in the base image.</p>
<p>Method: Fast Normalized Cross-Correlation.</p>
<p>Limitations:</p>
<ul class="simple">
<li>Cropping is limited to the the top left of the base image. The can be circumvented by setting
<code class="docutils literal"><span class="pre">base_image_cropping=(1,</span> <span class="pre">1)</span></code> and cropping <code class="docutils literal"><span class="pre">base_image</span></code> oneself.</li>
<li>This function may become unstable in situations where the pattern image is larger than the base image.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pattern_image</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">ndarray</span></code>) &#8211; <p>the pattern image.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If a <cite>ndarray</cite> is passed to <cite>pattern_image</cite>, it <em>must</em> be preprocessed to be a 2D array,
e.g., <code class="docutils literal"><span class="pre">scipy.misc.imread(pattern_image,</span> <span class="pre">flatten=True)</span></code></p>
</div>
</li>
<li><strong>base_image</strong> (<code class="docutils literal"><span class="pre">str</span></code> or <code class="docutils literal"><span class="pre">ndarray</span></code>) &#8211; <p>the base image in which to look for the <code class="docutils literal"><span class="pre">pattern_image</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If a <cite>ndarray</cite> is passed to <cite>base_image</cite>, it <em>must</em> be preprocessed to be a 2D array,
e.g., <code class="docutils literal"><span class="pre">scipy.misc.imread(base_image,</span> <span class="pre">flatten=True)</span></code></p>
</div>
</li>
<li><strong>base_resizes</strong> (<code class="docutils literal"><span class="pre">tuple</span></code>) &#8211; the range over which to rescale the base image.Define as a tuple of the
form <code class="docutils literal"><span class="pre">(start,</span> <span class="pre">end,</span> <span class="pre">step</span> <span class="pre">size)</span></code>. Defaults to <code class="docutils literal"><span class="pre">(0.5,</span> <span class="pre">2.0,</span> <span class="pre">0.1)</span></code>.</li>
<li><strong>end_search_threshold</strong> (<code class="docutils literal"><span class="pre">float</span></code> or  <code class="docutils literal"><span class="pre">None</span></code>) &#8211; if a match of this quality is found, end the search. Set equal to <code class="docutils literal"><span class="pre">None</span></code> to disable.
Defaults to 0.875.</li>
<li><strong>base_image_cropping</strong> &#8211; the amount of the image to crop with respect to the x and y axis.
form: <code class="docutils literal"><span class="pre">(height,</span> <span class="pre">width)</span></code>. Defaults to <code class="docutils literal"><span class="pre">(0.15,</span> <span class="pre">0.5)</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Notes:</p>
<ul class="simple">
<li>Decreasing <code class="docutils literal"><span class="pre">height</span></code> will increase the amount of the lower part of the image removed.</li>
<li>Increasing <code class="docutils literal"><span class="pre">width</span></code> will increase the amount of the image&#8217;s left half removed.</li>
<li>Cropping more of the base image reduces the probability that the algorithm getting confused.
However, if the image is cropped too much, the target pattern itself could be removed.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A dictionary of the form: <code class="docutils literal"><span class="pre">{&quot;bounding_box&quot;:</span> <span class="pre">...,</span> <span class="pre">&quot;match_quality&quot;:</span> <span class="pre">...,</span> <span class="pre">&quot;base_image_shape&quot;:</span> <span class="pre">...}</span></code>.<ul class="simple">
<li>bounding_box (<code class="docutils literal"><span class="pre">dict</span></code>): <code class="docutils literal"><span class="pre">{'bottom_right':</span> <span class="pre">(x,</span> <span class="pre">y),</span> <span class="pre">'top_right':</span> <span class="pre">(x,</span> <span class="pre">y),</span> <span class="pre">'top_left':</span> <span class="pre">(x,</span> <span class="pre">y),</span> <span class="pre">'bottom_left':</span> <span class="pre">(x,</span> <span class="pre">y)}</span></code>.</li>
<li>match_quality (<code class="docutils literal"><span class="pre">float</span></code>): quality of the match.</li>
<li>base_image_shape (<code class="docutils literal"><span class="pre">tuple</span></code>): the size of the base image provided. Form: <code class="docutils literal"><span class="pre">(width</span> <span class="pre">(x),</span> <span class="pre">height</span> <span class="pre">(y))</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><code class="docutils literal"><span class="pre">dict</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<span class="target" id="module-biovida.images.models.border_detection"></span><div class="section" id="border-and-edge-detection">
<h2>Border and Edge Detection<a class="headerlink" href="#border-and-edge-detection" title="Permalink to this headline">¶</a></h2>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, Tariq A. Hassan.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>